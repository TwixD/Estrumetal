<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets">

    <h:head>

        <title>Login</title>
        <meta content='text/html; charset=UTF-8' http-equiv="Content-Type"/>     
        <h:outputStylesheet name="css/login.css"/>
    </h:head>
    <h:body style="text-align:left">
        <p:growl id="mensajes" showDetail="true" life="2000" />
        
        <div class="wrapper">   
            <h1>Estrumetal</h1>
            <h2>Bienvenido al sistema de administracion estrumetal <span>SAE</span></h2>
            <div class="content">
                <div id="form_wrapper" class="form_wrapper">
                    <h:form id="loginform" class="login active">
                        <h3>Login</h3>
                        <div>
                            <h:outputLabel value="Usuario:" />
                            <p:inputText value="#{loginBean.nombre}" id="username" required="true"/>
                        </div>
                        <div>
                            <h:outputLabel value="Clave:" />
                            <p:password value="#{loginBean.clave}" id="password" required="true"/>
                        </div>
                        <div class="bottom" style="text-align: right; height: 56px; padding-top:15px; padding-right: 10px;" >
                            <p:commandButton id="loginButton" value="Login"
                                             actionListener="#{loginBean.login}" update=":mensajes"
                                             oncomplete="manejarLogin(xhr, status, args)" />
                            <div class="clear"></div>
                        </div>
                    </h:form>
                </div>
                <div class="clear"></div>
            </div>
        </div>
    </h:body>
    <script type="text/javascript">
        //<![CDATA[
        function manejarLogin(xhr, status, args) {
            if (!args.validationFailed && args.estaLogeado) {
                setTimeout(function() {
                    window.location = args.view;
                }, 500);
            }
        }
        //]]>
    </script>
</html>
